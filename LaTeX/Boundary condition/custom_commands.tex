\newcommand{\bigO}[1]{\mathcal{O}\left(#1\right)} % big O notation
\newcommand{\code}[1]{\texttt{#1}} % shortcut to insert code inline
\newcommand{\EE}[1]{\cdot 10^{#1}} % power of 10
\newcommand{\missingref}{[\todo[color=blue!30, size=\tiny, caption={Missing reference}]{Missing ref}?]\xspace}
\newcommand{\myvec}[1]{\boldsymbol{\mathrm{#1}}} % bold vectors
\newcommand{\norm}[1]{\Vert #1\Vert} % norm of a vector
\newcommand{\set}[1]{\{#1\}} % set notation with curly braces
\newcommand{\total}{\text{d}} % d for total derivative


% Project specific

\newcommand{\lambdavec}{\myvec{\lambda}}
\newcommand{\uvec}{\myvec{u}}

\makeatletter

\def\@setref#1#2#3{%
  \ifx#1\relax
   \protect\G@refundefinedtrue
   \nfss@text{\reset@font\bfseries\tiny\textcolor{red}{Ref to \colorbox{lightgray}{\texttt{#3}}}}%
   \@latex@warning{Reference `#3' on page \thepage \space
             undefined}%
  \else
   \expandafter#2#1\null
  \fi}

\makeatother